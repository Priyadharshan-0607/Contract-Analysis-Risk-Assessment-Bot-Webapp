<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GenAI Legal Assistant ‚Äì Indian SMEs</title>

<!-- Libraries -->
<script src="https://cdn.jsdelivr.net/npm/mammoth@1.6.0/mammoth.browser.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
--blue:#2563eb;
--blue-dark:#1e40af;
--bg:#f4f8ff;
--card:#ffffff;
--text:#1f2937;
}

*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Inter,Segoe UI,sans-serif;
background:linear-gradient(135deg,#eaf1ff,#f6f9ff);
min-height:100vh;color:var(--text)
}
.container{max-width:1200px;margin:auto;padding:30px}
.header{text-align:center;margin-bottom:40px}
.header h1{color:var(--blue-dark);font-size:2.4rem}
.header p{color:#475569}

.card{
background:rgba(255,255,255,.95);
border-radius:16px;
padding:28px;
margin-bottom:25px;
box-shadow:0 12px 30px rgba(37,99,235,.15)
}

.upload-box{
border:2px dashed var(--blue);
border-radius:14px;
padding:45px;
text-align:center;
cursor:pointer;
transition:.25s;
background:#f8fbff
}
.upload-box:hover{background:#eef4ff}
.upload-box.drag{background:#e0ebff}

.upload-box h3{color:var(--blue)}
.upload-box p{margin-top:10px;color:#64748b}

.file-status{
margin-top:15px;
color:#059669;
font-weight:600
}

.btn{
margin-top:20px;
background:linear-gradient(135deg,var(--blue),var(--blue-dark));
color:white;
border:none;
padding:14px 26px;
border-radius:10px;
font-size:1rem;
cursor:pointer;
transition:.2s
}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn:hover{transform:translateY(-1px)}

.metrics{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:20px
}
.metric{
background:linear-gradient(135deg,#2563eb,#1e40af);
color:white;
border-radius:14px;
padding:20px;
text-align:center
}

table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{padding:14px;border-bottom:1px solid #e5e7eb}
th{background:#f1f5ff;color:#1e40af}

textarea{
width:100%;min-height:140px;
padding:15px;border-radius:10px;
border:1px solid #c7d2fe
}

.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<div class="header">
<h1>‚öñÔ∏è GenAI Legal Assistant</h1>
<p>Secure contract analysis for Indian SMEs</p>
</div>

<!-- Upload -->
<div class="card">
<div id="uploadBox" class="upload-box">
<h3>üìÑ Upload Contract</h3>
<p>PDF / DOCX / TXT ‚Äî click or drag & drop</p>
<input type="file" id="fileInput" accept=".txt,.docx,.pdf" hidden>
<div id="fileStatus" class="file-status"></div>
</div>
<button id="analyzeBtn" class="btn" disabled>Analyze Contract</button>
</div>

<!-- Results -->
<div id="results" class="hidden">

<div class="card">
<div class="metrics">
<div class="metric"><h2 id="totalClauses">-</h2>Clauses</div>
<div class="metric"><h2 id="highRisk">-</h2>High Risk</div>
<div class="metric"><h2 id="riskLevel">-</h2>Risk</div>
</div>
</div>

<div class="card">
<h3>Summary</h3>
<textarea id="summary" readonly></textarea>
</div>

<div class="card">
<h3>Clause Analysis</h3>
<table>
<thead>
<tr><th>Clause</th><th>Risk</th><th>Explanation</th></tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>

<div class="card">
<button class="btn" onclick="exportPDF()">Download PDF</button>
</div>

</div>

</div>

<script>
let content='';
const box=document.getElementById('uploadBox');
const input=document.getElementById('fileInput');
const btn=document.getElementById('analyzeBtn');
const status=document.getElementById('fileStatus');

box.onclick=()=>input.click();

box.ondragover=e=>{e.preventDefault();box.classList.add('drag')};
box.ondragleave=()=>box.classList.remove('drag');
box.ondrop=e=>{
e.preventDefault();
box.classList.remove('drag');
input.files=e.dataTransfer.files;
handleFile();
};

input.onchange=handleFile;

async function handleFile(){
const file=input.files[0];
if(!file)return;
status.textContent=`‚úî ${file.name} loaded`;
btn.disabled=false;

if(file.name.endsWith('.txt')) content=await file.text();
else if(file.name.endsWith('.docx')){
const r=await mammoth.extractRawText({arrayBuffer:await file.arrayBuffer()});
content=r.value;
}else{
content='PDF preview limited in browser.';
}
}

btn.onclick=()=>{
const clauses=content.split(/[.!?]+/).filter(c=>c.length>40);
const high=clauses.filter(c=>/indemn|terminate|penalty|liabil/i.test(c)).length;
document.getElementById('results').classList.remove('hidden');
document.getElementById('totalClauses').textContent=clauses.length;
document.getElementById('highRisk').textContent=high;
document.getElementById('riskLevel').textContent=high>1?'High':'Low';
document.getElementById('summary').value=
`Total Clauses: ${clauses.length}\nHigh Risk Clauses: ${high}\nOverall Risk: ${high>1?'High':'Low'}`;

document.getElementById('tableBody').innerHTML=
clauses.slice(0,8).map(c=>
`<tr><td>${c}</td><td>${/indemn|terminate/i.test(c)?'High':'Low'}</td><td>Simplified explanation</td></tr>`
).join('');
};

function exportPDF(){
const {jsPDF}=window.jspdf;
const pdf=new jsPDF();
pdf.text('Contract Analysis Report',20,20);
pdf.text(document.getElementById('summary').value,20,40);
pdf.save('contract-analysis.pdf');
}
</script>

</body>
</html>
